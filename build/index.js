(()=>{"use strict";var e,t={276:(e,t,a)=>{const l=window.wp.blocks;var n=a(609);const o=window.wp.i18n,r=window.wp.blockEditor,i=window.wp.components,c=window.wp.data,s=window.wp.editor,u=window.wp.element,d=(0,u.forwardRef)((function({icon:e,size:t=24,...a},l){return(0,u.cloneElement)(e,{width:t,height:t,...a,ref:l})})),h=window.wp.primitives;var m=a(848);const _=(0,m.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(h.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})}),p=(0,m.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(h.Path,{d:"M10.5 4v4h3V4H15v4h1.5a1 1 0 011 1v4l-3 4v2a1 1 0 01-1 1h-3a1 1 0 01-1-1v-2l-3-4V9a1 1 0 011-1H9V4h1.5zm.5 12.5v2h2v-2l3-4v-3H8v3l3 4z"})}),g=(0,m.jsx)(h.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)(h.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"})}),w=(0,m.jsxs)(h.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,m.jsx)(h.Path,{d:"M18 4H6c-1.1 0-2 .9-2 2v12.9c0 .6.5 1.1 1.1 1.1.3 0 .5-.1.8-.3L8.5 17H18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 11c0 .3-.2.5-.5.5H7.9l-2.4 2.4V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v9z",fillRule:"evenodd",clipRule:"evenodd"}),(0,m.jsx)(h.Path,{d:"M15 15V15C15 13.8954 14.1046 13 13 13L11 13C9.89543 13 9 13.8954 9 15V15",fillRule:"evenodd",clipRule:"evenodd"}),(0,m.jsx)(h.Circle,{cx:"12",cy:"9",r:"2",fillRule:"evenodd",clipRule:"evenodd"})]}),f=(0,m.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(h.Path,{d:"M4 20h8v-1.5H4V20zM18.9 3.5c-.6-.6-1.5-.6-2.1 0l-7.2 7.2c-.4-.1-.7 0-1.1.1-.5.2-1.5.7-1.9 2.2-.4 1.7-.8 2.2-1.1 2.7-.1.1-.2.3-.3.4l-.6 1.1H6c2 0 3.4-.4 4.7-1.4.8-.6 1.2-1.4 1.3-2.3 0-.3 0-.5-.1-.7L19 5.7c.5-.6.5-1.6-.1-2.2zM9.7 14.7c-.7.5-1.5.8-2.4 1 .2-.5.5-1.2.8-2.3.2-.6.4-1 .8-1.1.5-.1 1 .1 1.3.3.2.2.3.5.2.8 0 .3-.1.9-.7 1.3z"})}),b=(0,m.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(h.Path,{d:"M18.5 10.5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})}),v=(0,m.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(h.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})}),y=(0,m.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(h.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),E=(0,m.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(h.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})});function C({width:e=24,height:t=24}){return(0,n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 106.81 106.14",style:{height:`${t}px`,width:`${e}px`}},(0,n.createElement)("g",null,(0,n.createElement)("g",null,(0,n.createElement)("path",{fill:"#1762e5",d:"M53.8,0C21.59,.02-3.81,28.37,1.62,60.05c2.03,11.82,4.28,22.72-1.05,34.08-1.64,3.49,.33,5.28,4.49,4.95,4.07-.33,8.13-.92,12.17-1.54,4.16-.64,7.84-.19,11.66,2.13,7.81,4.74,16.64,6.58,25.69,6.47,29.13-.34,52.43-24.45,52.22-53.74C106.61,23.43,82.88-.02,53.8,0Z"}),(0,n.createElement)("path",{fill:"#ffffff",d:"M64.11,88.26l-14.25-11.33c-.95-.75-2.21-.99-3.37-.64l-17.41,5.31c-2.92,.89-5.6-1.95-4.53-4.81l6.37-17.05c.42-1.14,.26-2.41-.43-3.4l-10.43-14.91c-1.75-2.5,.13-5.93,3.18-5.79l18.18,.79c1.21,.05,2.37-.49,3.1-1.46l10.96-14.53c1.84-2.44,5.68-1.71,6.49,1.23l4.87,17.54c.32,1.17,1.2,2.1,2.35,2.5l17.21,5.93c2.89,1,3.38,4.87,.83,6.56l-15.18,10.05c-1.01,.67-1.63,1.79-1.65,3.01l-.32,18.2c-.05,3.05-3.59,4.72-5.98,2.82Z"}))))}function x({user:e,...t}){return(0,n.createElement)("img",{src:e?.pictureUrl,alt:e?.email?.charAt(0).toUpperCase(),height:"32",width:"32",style:{borderRadius:"100%",marginRight:"8px",height:"32px",width:"32px",background:"#2F3952",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"medium",color:"white",cursor:"pointer"},...t})}const S=JSON.parse('{"UU":"create-block/featurable-google-reviews"}');(0,l.registerBlockType)(S.UU,{edit:function({attributes:e,setAttributes:t}){const a="featurable-google-reviews",{isSaving:l}=(0,c.useSelect)((e=>({isSaving:e(s.store).isSavingPost(),isDirty:e(s.store).isEditedPostDirty()}))),{widgetId:h}=e,m=(0,u.useRef)(null),[S,k]=(0,u.useState)(!1),[P,R]=(0,u.useState)([]),[j,A]=(0,u.useState)([]),[B,O]=(0,u.useState)([]),[D,T]=(0,u.useState)(!1),[L,z]=(0,u.useState)(!1),[F,V]=(0,u.useState)(!1),[I,M]=(0,u.useState)(!1),[U,N]=(0,u.useState)(null),[G,H]=(0,u.useState)(null),[W,$]=(0,u.useState)(JSON.parse(e.widgetConfig)),[J,Y]=(0,u.useState)(e.widgetLayout),[Z,q]=(0,u.useState)(!1),[K,Q]=(0,u.useState)(!1),[X,ee]=(0,u.useState)(""),[te,ae]=(0,u.useState)(null),[le,ne]=(0,u.useState)(null),{createNotice:oe}=(0,c.useDispatch)("core/notices"),re=async()=>{try{const e=await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"featurable_auth_check",nonce:featurableData.nonce})});if(!e.ok)throw new Error("Authentication failed");{const t=await e.json();if(t.success)return k(!0),ae(t.data.user),!0}}catch(e){console.error("Auth error:",e)}return!1},ie=async()=>{if(S){V(!0);try{const e=await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"featurable_load_data",nonce:featurableData.nonce})});if(!e.ok)throw new Error("Failed to load data");{const t=await e.json();t.success&&(R(t.data.widgets),A(t.data.accounts))}}catch(e){console.log(e),oe("error","An unexpected error occurred while loading your data.",{isDismissible:!0,type:"snackbar"})}V(!1)}},ce=async()=>{if(h)try{const e=await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"featurable_get_widget_data",nonce:featurableData.nonce,widgetId:h})});if(!e.ok)throw new Error("Failed to get widget data");{const t=await e.json();t.success&&($(t.data.config),Y(t.data.layout))}}catch(e){console.log(e),oe("error","An unexpected error occurred while loading widget data.",{isDismissible:!0,type:"snackbar"})}},se=(0,u.useCallback)((()=>{if(window.initializeFeaturableWidget)try{window.initializeFeaturableWidget(`featurable-${h}`,W,J)}catch(e){console.log(e),oe("error","An unexpected error occurred while rendering widget.",{isDismissible:!0,type:"snackbar"})}}),[h,W,J]),ue=e=>e?e.replace(/(<([^>]+)>)/gi,""):e;(0,u.useEffect)((()=>{re().then((e=>{e&&ie()}))}),[]),(0,u.useEffect)((()=>{if(l){(async()=>{if(h)try{const e=await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"featurable_save_widget",nonce:featurableData.nonce,widgetId:h,widgetConfig:JSON.stringify(W),widgetLayout:J})}),t=await e.json();if(!e.ok)throw new Error("Failed to save widget");t.success&&se()}catch(e){console.log(e),oe("error","An unexpected error occurred while saving widget.",{isDismissible:!0,type:"snackbar"})}})();const e=setTimeout((()=>{se()}),0);return ce(),ie(),()=>clearTimeout(e)}}),[l]),(0,u.useEffect)((()=>{t({widgetConfig:JSON.stringify(W)}),se()}),[W]),(0,u.useEffect)((()=>{t({widgetLayout:J}),se()}),[J]),(0,u.useEffect)((()=>{const e=setTimeout((()=>{se()}),0);return ce(),()=>clearTimeout(e)}),[h]),(0,u.useEffect)((()=>{const e=async e=>{if("FEATURABLE_AUTH_SUCCESS"===e.data.type){const t=e.data.token;if(!t)return void alert((0,o.__)("Authentication failed. Please try again.",a));await(async e=>{try{const t=await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"featurable_auth_callback",token:e,nonce:featurableData.nonce})});if(!t.ok)throw new Error("Authentication failed");(await t.json()).success&&k(!0)}catch(e){console.error("Auth error:",e),oe("error","An unexpected error occurred while authenticating.",{isDismissible:!0,type:"snackbar"})}})(t),await re(),await ie(),await ce(),le&&le.close()}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[le]),(0,u.useEffect)((()=>{U&&(async()=>{T(!0);try{const e=await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"featurable_list_locations",nonce:featurableData.nonce,accountName:U})});if(!e.ok)throw new Error("Failed to list locations");{const t=await e.json();t.success&&O(t.data.locations)}}catch(e){console.log(e)}T(!1)})()}),[U]);const de=[(0,o.__)("Unlimited widgets",a),(0,o.__)("Remove Featurable branding",a),(0,o.__)("Pin reviews to the top",a),(0,o.__)("Add highlights to reviews",a),(0,o.__)("AI tools for increasing conversions",a)];return(0,n.createElement)("div",{...(0,r.useBlockProps)()},(0,n.createElement)(r.InspectorControls,null,F&&(0,n.createElement)("p",null,(0,o.__)("Loading data...",a)),S?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,null,(0,n.createElement)("div",{style:{display:"flex",justifyContent:"start",alignItems:"center"}},(0,n.createElement)(x,{user:te,onClick:()=>M(!0),role:"button",tabIndex:0,"aria-label":(0,o.__)("Open My Account",a)}),(0,n.createElement)("div",null,(0,n.createElement)("span",{style:{fontWeight:"bold"}},ue(te?.email)),(0,n.createElement)("span",{style:{display:"flex",alignItems:"center"}},(0,n.createElement)(d,{icon:_,style:{height:"20px",width:"20px",fill:"#3b82f6"}}),(0,o.sprintf)((0,o.__)("%s Account",a),te?.upgraded?(0,o.__)("Pro",a):(0,o.__)("Free",a)),!te?.upgraded&&(0,n.createElement)("span",null," ","-"," ",(0,n.createElement)("a",{href:"https://featurable.com/account/upgrade",target:"_blank"},(0,o.__)("Upgrade to Pro",a)))))))),(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,{title:(0,o.__)("Setup",a),icon:p},(0,n.createElement)("p",null,(0,o.__)("Choose or create a new widget to get started. Visit your",a)," ",(0,n.createElement)("a",{href:"https://featurable.com/app",target:"_blank"},(0,o.__)("Featurable dashboard",a))," ",(0,o.__)("for full customization options and more tools.",a)),P.length>0?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Choose Widget",a),value:e.widgetId,options:P.map((e=>{return{label:`${e.locationDisplayName} | ${t=e.layout,t?t.charAt(0).toUpperCase()+t.slice(1):t}`,value:e.uid};var t})),onChange:e=>{console.log(e),t({widgetId:e})}}),(0,n.createElement)(i.TextControl,{label:(0,o.__)("Widget ID",a),value:e.widgetId,readOnly:!0,help:(0,o.__)("The unique identifier for this widget.",a)})):(0,n.createElement)("div",null,(0,n.createElement)("p",null,(0,o.__)("No widgets found. Create a new widget to get started.",a))),(0,n.createElement)(i.Button,{variant:"secondary",onClick:()=>q(!0),"aria-label":(0,o.__)("Create New Widget",a)},"+ ",(0,o.__)("New Widget",a)),Z&&(0,n.createElement)(i.Modal,{title:(0,o.__)("Create New Widget",a),onRequestClose:()=>q(!1)},0===j.length&&(0,n.createElement)("p",null,(0,o.__)("No Google accounts found. Please connect your Google account by",a)," ",(0,n.createElement)("a",{href:"https://featurable.com/account/signin"},(0,o.__)("signing in",a)),(0,o.__)("and",a)," ",(0,n.createElement)("strong",null,(0,o.__)("making sure to click the checkbox(es)",a))," ",(0,o.__)("to allow access to your Google account.",a)),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Choose Google Account",a),defaultValue:"",value:U||"",options:[{label:(0,o.__)("Choose Google Account",a),value:"",disabled:!0},...j.map((e=>({label:`${e.accountName}`,value:e.name})))],onChange:e=>N(e)}),0===B.length?(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Choose Business Profile",a),options:[{label:D?(0,o.__)("Loading...",a):(0,o.__)("Choose Google Account first",a),value:""}],disabled:!0}):(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Choose Business Profile",a),defaultValue:"",value:G||"",options:[{label:(0,o.__)("Choose Business Profile",a),value:"",disabled:!0},...B.map((e=>({label:e.title,value:e.name})))],onChange:e=>H(e)}),(0,n.createElement)("div",{style:{display:"flex",justifyContent:"end",alignItems:"center",marginTop:"16px"}},(0,n.createElement)(i.Button,{variant:"secondary",onClick:()=>q(!1),style:{marginRight:"4px"},"aria-label":(0,o.__)("Cancel",a)},(0,o.__)("Cancel",a)),(0,n.createElement)(i.Button,{disabled:!U||!G||L,variant:"primary",onClick:async()=>{if(U&&G){z(!0);try{const e=await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"featurable_create_widget",nonce:featurableData.nonce,account:U,location:G})}),a=await e.json();if(a.success)z(!1),q(!1),oe("success","Widget created successfully",{isDismissible:!0,type:"default"}),await ie(),t({widgetId:a.data.widget_uid});else if("widget_limit_reached"===a.data.key)return ee("You've reached the widget limit for your account."),Q(!0),void z(!1)}catch(e){console.log(e)}z(!1)}},"aria-label":(0,o.__)("Create Widget",a)},L?(0,o.__)("Loading...",a):(0,o.__)("Create Widget",a)))))),e.widgetId&&(0,n.createElement)("div",null,(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,{title:(0,o.__)("Layout",a),icon:g,initialOpen:!1},(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Layout Style",a),value:J,options:[{label:(0,o.__)("Badge",a),value:"badge"},{label:(0,o.__)("Carousel",a),value:"carousel"},{label:(0,o.__)("Grid",a),value:"grid"},{label:(0,o.__)("List",a),value:"list"},{label:(0,o.__)("Masonry",a),value:"masonry"},{label:(0,o.__)("Slider",a),value:"slider"}],onChange:e=>Y(e)}),"carousel"===J&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.CheckboxControl,{label:(0,o.__)("Autoplay",a),help:(0,o.__)("Automatically scroll through the reviews.",a),checked:W.carouselAutoplay,onChange:e=>{$({...W,carouselAutoplay:e})}}),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Autoplay Speed (ms)",a),help:(0,o.__)("Time in milliseconds between each slide.",a),value:W.carouselSpeed,onChange:e=>{$({...W,carouselSpeed:parseInt(e)})},options:[{label:"500",value:500},{label:"1000",value:1e3},{label:"2000",value:2e3},{label:"3000",value:3e3},{label:"5000",value:5e3},{label:"8000",value:8e3},{label:"12000",value:12e3}]})),"slider"===J&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.CheckboxControl,{label:(0,o.__)("Autoplay",a),help:(0,o.__)("Automatically scroll through the reviews.",a),checked:W.sliderAutoplay,onChange:e=>{$({...W,sliderAutoplay:e})}}),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Autoplay Speed (ms)",a),help:(0,o.__)("Time in milliseconds between each slide.",a),value:W.sliderSpeed,onChange:e=>{$({...W,sliderSpeed:parseInt(e)})},options:[{label:"500",value:500},{label:"1000",value:1e3},{label:"2000",value:2e3},{label:"3000",value:3e3},{label:"5000",value:5e3},{label:"8000",value:8e3},{label:"12000",value:12e3}]})),"badge"===J&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.CheckboxControl,{label:(0,o.__)("Floating Badge",a),help:(0,o.__)("Display the badge in the corner of the screen.",a),checked:W.floating,onChange:e=>{$({...W,floating:e})}}),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Float Position",a),value:W.floatPosition,options:[{label:(0,o.__)("Left",a),value:"left"},{label:(0,o.__)("Right",a),value:"right"}],onChange:e=>{$({...W,floatPosition:e})}}),(0,n.createElement)(i.CheckboxControl,{label:(0,o.__)("Dismissable",a),help:(0,o.__)("Let users close the floating badge.",a),checked:W.dismissable,onChange:e=>{$({...W,dismissable:e})}})))),(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,{title:(0,o.__)("Reviews",a),icon:w,initialOpen:!1},(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Minimum Rating",a),help:(0,o.__)("Only show reviews with a rating of this value or higher.",a),options:[{label:(0,o.sprintf)((0,o._n)("%d star","%d stars",5,a),5),value:5},{label:(0,o.sprintf)((0,o._n)("%d star","%d stars",4,a),4),value:4},{label:(0,o.sprintf)((0,o._n)("%d star","%d stars",3,a),3),value:3},{label:(0,o.sprintf)((0,o._n)("%d star","%d stars",2,a),2),value:2},{label:(0,o.sprintf)((0,o._n)("%d star","%d stars",1,a),1),value:1}],value:W.minStars,onChange:e=>{$({...W,minStars:e})}}),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Reviews Per Page",a),help:(0,o.__)("Maximum number of reviews to display per page.",a),options:Array.from(Array(10)).map(((e,t)=>({label:`${t+1}`,value:t+1}))),value:W.pageSize,onChange:e=>{$({...W,pageSize:e})}}))),(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,{title:(0,o.__)("Style",a),icon:f,initialOpen:!1},(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Review Card Style",a),value:W.reviewVariant,options:[{label:(0,o.__)("Card",a),value:"card"},{label:(0,o.__)("Testimonial",a),value:"testimonial"}],onChange:e=>{$({...W,reviewVariant:e})}}),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Review Theme",a),value:W.theme,options:[{label:(0,o.__)("Dark",a),value:"dark"},{label:(0,o.__)("Light",a),value:"light"}],onChange:e=>{$({...W,theme:e})}}),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Date Display",a),value:W.dateDisplay,options:[{label:(0,o.__)("Time Since",a),value:"relative"},{label:(0,o.__)("Exact Date",a),value:"absolute"}],onChange:e=>{$({...W,dateDisplay:e})}}),(0,n.createElement)(i.CheckboxControl,{label:(0,o.__)("Show Dates on Reviews",a),help:(0,o.__)("Whether to show or hide the date the review was posted.",a),checked:"none"!==W.dateDisplay,onChange:e=>{$({...W,dateDisplay:e?"relative":"none"})}}),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Name Display",a),help:(0,o.__)("How to display the name of the reviewer.",a),value:W.nameDisplay,options:[{label:(0,o.__)("First Name Only",a),value:"firstNamesOnly"},{label:(0,o.__)("First Name + Last Initials",a),value:"firstAndLastInitials"},{label:(0,o.__)("Full Name",a),value:"fullNames"}],onChange:e=>{$({...W,nameDisplay:e})}}),(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Google Logo Style",a),value:W.logoVariant,options:[{label:(0,o.__)("Icon",a),value:"icon"},{label:(0,o.__)("Full",a),value:"full"},{label:(0,o.__)("Hidden",a),value:"none"}],onChange:e=>{$({...W,logoVariant:e})}}))),(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,{title:(0,o.__)("Summary Bar",a),icon:b,initialOpen:!1},(0,n.createElement)("p",null,(0,o.__)("You can add a summary bar to the top of your widget to display average rating, total reviews, and link to your Google profile.",a)),(0,n.createElement)(i.CheckboxControl,{checked:W.summary,onChange:e=>{$({...W,summary:e})},label:(0,o.__)("Show Summary Bar",a)}),"list"===J&&(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Summary Position",a),value:W.summaryPosition,options:[{label:(0,o.__)("Top",a),value:"top"},{label:(0,o.__)("Left",a),value:"left"},{label:(0,o.__)("Right",a),value:"right"}],onChange:e=>{$({...W,summaryPosition:e})}}),(0,n.createElement)(i.CheckboxControl,{checked:W.summaryReviewButton,onChange:e=>{$({...W,summaryReviewButton:e})},label:(0,o.__)("Show Review Button",a),help:(0,o.__)("Show a button to leave a review on Google.",a)}))),(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,{title:(0,o.__)("Settings",a),icon:v,initialOpen:!1},(0,n.createElement)(i.CheckboxControl,{checked:W.schema,onChange:e=>{$({...W,schema:e})},label:(0,o.__)("Enable Structured Data",a),help:(0,o.__)("Add JSON-LD structured data to your widget for enhanced SEO.",a)}),(0,n.createElement)(i.Button,{variant:"secondary",href:"https://featurable.com/app",target:"_blank","aria-label":(0,o.__)("Delete Widget",a)},(0,n.createElement)(d,{icon:y}),(0,o.__)("Delete Widget",a)))),!te?.upgraded&&(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,{title:(0,o.__)("Upgrade",a),initialOpen:!0},(0,n.createElement)("p",null,(0,o.__)("Remove Featurable branding, unlock unlimited widgets, and more with Featurable Pro.",a)),(0,n.createElement)(i.Button,{variant:"primary",href:"https://featurable.com/account/upgrade",target:"_blank"},(0,o.__)("Upgrade to Pro",a)),(0,n.createElement)(i.Button,{style:{marginTop:"16px",display:"block"},variant:"link",href:"mailto:support@featurable.com","aria-label":(0,o.__)("Contact Support",a)},(0,o.__)("Support",a)))))):(0,n.createElement)(i.Panel,null,(0,n.createElement)(i.PanelBody,{title:(0,o.__)("Setup",a),icon:p},(0,n.createElement)("p",null,(0,o.__)("Welcome to the Featurable Google Reviews widget! To get started, please login or create your free account by clicking the button below.",a)),(0,n.createElement)(i.Button,{variant:"primary",onClick:async()=>{const e=window.open("http://featurable.com/app?wp=true","Auth","width=1000,height=600");ne(e)}},(0,o.__)("Login / Signup",a)))),I&&(0,n.createElement)(i.Modal,{title:(0,o.__)("My Account",a),onRequestClose:()=>M(!1)},(0,n.createElement)("div",{style:{display:"flex",justifyContent:"start",alignItems:"center"}},(0,n.createElement)(x,{user:te}),(0,n.createElement)("div",null,(0,n.createElement)("span",{style:{fontWeight:"bold"}},ue(te?.email)),(0,n.createElement)("span",{style:{display:"flex",alignItems:"center"}},(0,n.createElement)(d,{icon:_,style:{height:"20px",width:"20px",fill:"#3b82f6"}}),(0,o.sprintf)((0,o.__)("%s Account",a),te?.upgraded?(0,o.__)("Pro",a):(0,o.__)("Free",a)),!te?.upgraded&&(0,n.createElement)("span",null," ","-"," ",(0,n.createElement)("a",{href:"https://featurable.com/account/upgrade",target:"_blank"},(0,o.__)("Upgrade to Pro",a)))))),(0,n.createElement)("p",null,(0,o.__)("You can manage your account, billing, and widgets from the Featurable dashboard.",a)),(0,n.createElement)("div",null,(0,n.createElement)(i.Button,{variant:"primary",href:"https://featurable.com/app",style:{marginRight:"8px"}},(0,o.__)("Go to Featurable Dashboard",a)," →"),(0,n.createElement)(i.Button,{variant:"secondary",onClick:async()=>{try{const e=await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"featurable_sign_out",nonce:featurableData.nonce})});if(!e.ok)throw new Error("Failed to sign out");(await e.json()).success&&(k(!1),R([]),A([]),O([]),ae(null),oe("success","You have been signed out successfully.",{isDismissible:!0,type:"snackbar"}),M(!1))}catch(e){oe("error","An unexpected error occurred while signing out.",{isDismissible:!0,type:"snackbar"})}}},(0,o.__)("Sign Out",a)))),K&&(0,n.createElement)(i.Modal,{title:(0,o.__)("Upgrade for Unlimited Access",a),onRequestClose:()=>Q(!1)},(0,n.createElement)(C,null),(0,n.createElement)("p",{style:{fontSize:"16px"}},X&&(0,n.createElement)("strong",null,X,(0,n.createElement)("br",null)),(0,o.__)("Get",a)," ",(0,n.createElement)("a",{href:"https://featurable.com/pricing",target:"_blank"},(0,o.__)("Featurable Pro",a))," ",(0,o.__)("to unlock unlimited widgets, remove branding, and more!",a)),(0,n.createElement)("ul",null,de.map((e=>(0,n.createElement)("li",{key:e,style:{display:"flex",alignItems:"center",fontSize:"16px"}},(0,n.createElement)(d,{icon:E,style:{color:"#047857",backgroundColor:"#a7f3d0",height:"16px",width:"16px",marginRight:"6px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%"}}),(0,n.createElement)("span",null,e))))),(0,n.createElement)("div",{style:{display:"flex",justifyContent:"end",alignItems:"center",marginTop:"16px"}},(0,n.createElement)(i.Button,{variant:"secondary",onClick:()=>Q(!1),style:{marginRight:"4px"}},(0,o.__)("Cancel",a)),(0,n.createElement)(i.Button,{variant:"primary",href:"https://featurable.com/pricing",target:"_blank"},(0,o.sprintf)((0,o.__)("Upgrade to Pro - %s / year",a),"$59"))))),(0,n.createElement)("div",{ref:m,id:`featurable-${h}`,"data-featurable-async":!0}))},save:function({attributes:e}){const{widgetId:t,align:a}=e;return(0,n.createElement)("div",{...r.useBlockProps.save(),className:`align${a}`},(0,n.createElement)("script",{src:"https://cdn.featurable.com/bundle.js",defer:!0}),(0,n.createElement)("div",{id:`featurable-${t}`,"data-featurable-async":!0}))}})},20:(e,t,a)=>{var l=a(609),n=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var l,c={},s=null,u=null;for(l in void 0!==a&&(s=""+a),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,l)&&!i.hasOwnProperty(l)&&(c[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===c[l]&&(c[l]=t[l]);return{$$typeof:n,type:e,key:s,ref:u,props:c,_owner:r.current}}t.jsx=c,t.jsxs=c},848:(e,t,a)=>{e.exports=a(20)},609:e=>{e.exports=window.React}},a={};function l(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,l),o.exports}l.m=t,e=[],l.O=(t,a,n,o)=>{if(!a){var r=1/0;for(u=0;u<e.length;u++){for(var[a,n,o]=e[u],i=!0,c=0;c<a.length;c++)(!1&o||r>=o)&&Object.keys(l.O).every((e=>l.O[e](a[c])))?a.splice(c--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var s=n();void 0!==s&&(t=s)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,n,o]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[r,i,c]=a,s=0;if(r.some((t=>0!==e[t]))){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(c)var u=c(l)}for(t&&t(a);s<r.length;s++)o=r[s],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(u)},a=globalThis.webpackChunkfeaturable_google_reviews=globalThis.webpackChunkfeaturable_google_reviews||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=l.O(void 0,[350],(()=>l(276)));n=l.O(n)})();